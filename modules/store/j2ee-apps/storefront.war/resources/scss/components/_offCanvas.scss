// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

// Off Canvas Tab Bar Variables
$include-html-off-canvas-classes: true !default;

// Off Canvas Menu Variables
$off-canvas-width: calculateRem(250px) !default;
$off-canvas-bg: $white !default;

// Off Canvas Menu List Variables
$off-canvas-label-padding: .3rem calculateRem(15px) !default;
$off-canvas-label-color: $almost-white !default;
$off-canvas-label-text-transform: uppercase !default;
$off-canvas-label-font-size: calculateRem(12px) !default;
$off-canvas-label-font-weight: $bold !default;
$off-canvas-label-bg:  $deepest-gray !default;
$off-canvas-label-border-top: 1px solid $medium-gray !default;
$off-canvas-label-border-bottom: none !default;
$off-canvas-label-margin:0 !default;
$off-canvas-link-padding: calculateRem(10px) !default;
$off-canvas-link-color: $black !default;
$off-canvas-link-background-color: $white !default;
$off-canvas-link-background-color-active: $light-gray !default;
$off-canvas-link-border-bottom: 1px solid $medium-gray !default;
$off-canvas-link-border-top: 1px solid $medium-gray !default;

// Off Canvas Back-Link Overlay
$off-canvas-overlay-transition: background 300ms ease !default;
$off-canvas-overlay-cursor: pointer !default;
$off-canvas-overlay-box-shadow: -4px 0 4px rgba($black, 0.5), 4px 0 4px rgba($black, 0.5) !default;
$off-canvas-overlay-background: rgba($black, 0.6) !default;
$off-canvas-overlay-background-hover: rgba($white, 0.05) !default;
// Transition Variables
$menu-slide: "transform 500ms ease" !default;
// MIXINS
// Remove transition flicker on phones
@mixin kill-flicker {
	// -webkit-transform: translateZ(0x);
	-webkit-backface-visibility: hidden;
}
// Basic properties for the content wraps
@mixin wrap-base {
	position: relative;
	width: 100%;
}
@mixin translate3d($tx,$ty,$tz) {
	-ms-transform: translate($tx,$ty);
	-webkit-transform: translate3d($tx,$ty,$tz);
	-moz-transform: translate3d($tx,$ty,$tz);
	-ms-transform: translate3d($tx,$ty,$tz);
	-o-transform: translate3d($tx,$ty,$tz);
	transform: translate3d($tx,$ty,$tz)
}
// basic styles for off-canvas menu container
@mixin off-canvas-menu($position) {
	@include kill-flicker;
	* { @include kill-flicker; }
	width: $off-canvas-width;
	top: 0;
	bottom: 0;
	position: absolute;
	overflow-x: hidden;
	overflow-y: auto;
	background: $off-canvas-bg;
	z-index: 1001;
	box-sizing: content-box;
	transition: transform 500ms ease 0s;
	-webkit-overflow-scrolling: touch;
	-ms-overflow-style: -ms-autohiding-scrollbar;
	@if $position == left {
		@include translate3d(-100%,0,0);
		left: 0;
	}
	@if $position == right {
		@include translate3d(100%,0,0);
		right: 0;
	}
}
// OFF CANVAS WRAP
// Wrap visible content and prevent scroll bars
@mixin off-canvas-wrap {
	@include kill-flicker;
	@include wrap-base;
	overflow: hidden;
	&.move-right,
	&.move-left { min-height: 100%; -webkit-overflow-scrolling: touch; }
}
// INNER WRAP
// Main content area that moves to reveal the off-canvas nav
@mixin inner-wrap {
	// @include kill-flicker;
	// removed for now till chrome fixes backface issue
	@include wrap-base;
	@include clearfix;
	-webkit-transition: -webkit-#{$menu-slide};
	-moz-transition: -moz-#{$menu-slide};
	-ms-transition: -ms-#{$menu-slide};
	-o-transition: -o-#{$menu-slide};
	transition: #{$menu-slide};
}

// OFF CANVAS LIST
// This is the list of links in the off-canvas menu
@mixin off-canvas-list {
	list-style-type: none;
	padding:0;
	margin:0;
	border-bottom: 2px solid $medium-gray;
	li {
		label {
			background: $off-canvas-label-bg;
			border-bottom: $off-canvas-label-border-bottom;
			border-top: $off-canvas-label-border-top;
			color: $off-canvas-label-color;
			display: block;
			font-size: $off-canvas-label-font-size;
			font-weight: $off-canvas-label-font-weight;
			margin: $off-canvas-label-margin;
			padding: $off-canvas-label-padding;
			text-transform: $off-canvas-label-text-transform;
		}
		a {
			display: block;
			@include font-size(11px);
			padding: $off-canvas-link-padding;
			color: $off-canvas-link-color;
			background-color: $off-canvas-link-background-color;
			//border-bottom: $off-canvas-link-border-bottom;
			//border-top: $off-canvas-link-border-top;
			transition: background 300ms ease;
			&:hover, &:focus {
				text-decoration:none;
			}
			&.active {
				background-color: darken($off-canvas-link-background-color-active, 10);
				border-bottom-color: transparent;
				color: $black;
			}
		}
	}
}
// BACK LINK
// This is an overlay that, when clicked, will toggle off the off canvas menu
@mixin back-link {
	@include kill-flicker;
	transition: $off-canvas-overlay-transition;
	cursor: $off-canvas-overlay-cursor;
	box-shadow: $off-canvas-overlay-box-shadow;
	// fill the screen
	display: block;
	position: absolute;
	background: $off-canvas-overlay-background;
	top: 0;
	bottom: 0;
	left:0;
	right:0;
	z-index: 1002;
	-webkit-tap-highlight-color: rgba(0,0,0,0);
	/*
	@include media(medium-up) {
		&:hover {
			background: $off-canvas-overlay-background-hover;
		}
	}
	*/
}
//
// DEFAULT CLASSES
//
.off-canvas-wrap { @include off-canvas-wrap; }
.inner-wrap { @include inner-wrap; }
.off-canvas-menu { @include off-canvas-menu($position: left); }
// ANIMATION CLASSES
// These classes are added with JS and trigger the actual animation.
.move-right {
	overflow-y: hidden;
	> .inner-wrap {
		@include translate3d($off-canvas-width, 0, 0);
	}
	.icon-menu {
		display: none;
	}
	a.exit-off-canvas { @include back-link;}
}
.offcanvas-overlap {
	.off-canvas-menu {
		-ms-transform: none;
		-webkit-transform: none;
		-moz-transform: none;
		-o-transform: none;
		transform: none;
		z-index: 1003;
		@include box-shadow(0px, 0px, 10px, $deep-gray);

		// jjensen : show close button
		overflow: visible;
		.icon-menu {
			position: absolute;
			right: -32px;
			top: 10px;
			color: $deep-gray;
			background: $white;
			@include font-size(12px);
			-webkit-border-radius: 16px;
			-moz-border-radius: 16px;
			border-radius: 16px;
			padding: 6px;
		}
	}
	a.exit-off-canvas { @include back-link; }
}
.offcanvas-overlap-right {
	.off-canvas-menu {
		-ms-transform: none;
		-webkit-transform: none;
		-moz-transform: none;
		-o-transform: none;
		transform: none;
		z-index: 1003;
		@include box-shadow(0px, 0px, 10px, $deep-gray);

		// jjensen : show close button
		overflow: visible;
		.icon-menu {
			position: absolute;
			right: -32px;
			top: 10px;
			color: $white;
			background: $orange;
			@include font-size(12px);
			-webkit-border-radius: 16px;
			-moz-border-radius: 16px;
			border-radius: 16px;
			padding: 6px;
		}
	}
	a.exit-off-canvas { @include back-link; }
}

// Menu treatment
.off-canvas-list {
	@include off-canvas-list();

	.icon {
		@include rem-size(padding-right, 4px);
	}
	.accordion-container {
		.accordion-title {
			font-weight: $normal;
		}
		&.has-submenu > .accordion-title {
			font-weight: $bold;
		}
		ul {
			@include unlist();
			li {
				a {
					background-color: $off-canvas-link-background-color-active;
				}
			}
		}
		.icon {
			position: absolute;
			right: 8px;
			@include rem-size(margin-top, 2px);
			padding-right: 0;
		}
		.accordion-container {
			a.active {
				background-color: darken($off-canvas-link-background-color-active, 20);
			}
			ul li a {
				background-color: darken($off-canvas-link-background-color-active, 10);
			}
		}
	}
}

// Older browsers
.no-csstransforms {
	.off-canvas-menu { left: -($off-canvas-width); }
	.move-right > .inner-wrap { left: $off-canvas-width; }
}

.greeting {
	border-bottom: none;

	.utility-login.recognized {
		padding: $off-canvas-link-padding;
		background-color: $orange;
		color: $white;
		@include font-size(14px);
		font-weight: $bold;
		letter-spacing: 1px;
		text-transform: uppercase;
	}
}
